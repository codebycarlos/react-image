{"version":3,"file":"Img.js","sources":["../jsSrc/Img.js"],"sourcesContent":["import React from 'react';\nimport useImage from './useImage';\nimport imagePromiseFactory from './imagePromiseFactory';\nconst passthroughContainer = (x) => x;\nexport default function Img({ decode = true, src: srcList = [], loader = null, unloader = null, container = passthroughContainer, loaderContainer = passthroughContainer, unloaderContainer = passthroughContainer, imgPromise, useSuspense = false, ...imgProps // anything else will be passed to the <img> element\n }) {\n    const { crossorigin, crossOrigin } = imgProps ?? {};\n    const crossOriginToUse = (() => {\n        if (crossorigin !== undefined && crossOrigin !== undefined) {\n            const imgPropsKeys = Object.keys(imgProps);\n            const crossoriginIndex = imgPropsKeys.findIndex((x) => x === 'crossorigin');\n            const crossOriginIndex = imgPropsKeys.findIndex((x) => x === 'crossOrigin');\n            return crossOriginIndex > crossoriginIndex ? crossOrigin : crossorigin;\n        }\n        return crossOrigin ?? crossorigin;\n    })();\n    imgPromise =\n        imgPromise || imagePromiseFactory({ decode, crossOrigin: crossOriginToUse });\n    const { src, isLoading } = useImage({\n        srcList,\n        imgPromise,\n        useSuspense,\n    });\n    // console.log({src, isLoading, resolvedSrc, useSuspense})\n    // show img if loaded\n    if (src)\n        return container(React.createElement(\"img\", { src: src, ...imgProps }));\n    // show loader if we have one and were still trying to load image\n    if (!useSuspense && isLoading)\n        return loaderContainer(loader);\n    // show unloader if we have one and we have no more work to do\n    if (!useSuspense && unloader)\n        return unloaderContainer(unloader);\n    return null;\n}\n//# sourceMappingURL=Img.js.map"],"names":["passthroughContainer","x","Img","decode","src","srcList","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","useSuspense","imgProps","crossorigin","crossOrigin","crossOriginToUse","undefined","imgPropsKeys","Object","keys","crossoriginIndex","findIndex","crossOriginIndex","imagePromiseFactory","useImage","isLoading","React"],"mappings":"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"}